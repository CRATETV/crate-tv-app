<?xml version="1.0" encoding="utf-8" ?>
<component name="AccountLinkScene" extends="Scene">
    <script type="text/brightscript" uri="pkg:/components/AccountLinkScene.brs" />
    <children>
        <!-- Background -->
        <Poster 
            uri="pkg:/images/splash_hd.png" 
            width="1920" 
            height="1080"
        />
        <Rectangle color="0x000000D0" width="1920" height="1080" />

        <!-- Centered Content Group -->
        <Group translation="[960, 540]" horizAlign="center" vertAlign="center">
            <Poster 
                uri="pkg:/images/logo_hd.png"
                width="400"
                translation="[0, -250]"
                horizAlign="center"
            />
            <Label 
                text="Link Your Crate TV Account"
                width="1200"
                horizAlign="center"
                font="font:LargeBoldSystemFont"
                translation="[0, -100]"
            />
            <Label
                id="instructionsLabel"
                text="1. On a phone or computer, go to: cratetv.net/link-roku
2. Enter the code below:"
                width="800"
                wrap="true"
                horizAlign="center"
                translation="[0, 20]"
                font="font:SmallSystemFont"
            />
            <Rectangle
                width="400"
                height="120"
                color="0x181818FF"
                translation="[0, 180]"
                horizAlign="center"
            >
                 <Label 
                    id="codeLabel"
                    text="LOADING"
                    width="400"
                    height="120"
                    horizAlign="center"
                    vertAlign="center"
                >
                    <font role="sans" size="80" />
                </Label>
            </Rectangle>
            <Label 
                id="statusLabel"
                text="Waiting for you to enter the code on the website..."
                width="800"
                horizAlign="center"
                translation="[0, 300]"
                font="font:SmallSystemFont"
                color="0xCCCCCCFF"
            />
        </Group>

        <!-- Node for getting the link code -->
        <Task id="getCodeTask" uri="pkg:/components/ContentTask.xml" />

        <!-- Node for checking link status -->
        <Task id="statusCheckTask" uri="pkg:/components/ContentTask.xml" />
        
        <!-- Timer for polling the status -->
        <Timer 
            id="statusCheckTimer"
            duration="5"
            repeat="true"
        />
    </children>
</component>